<html>
    <head>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    </head>
    <body >
        <!-- NAVBAR -->
<nav class="navbar navbar-expand-lg bg-white shadow-sm py-2 ">
  <div class="container-fluid">
    
    <a class="navbar-brand d-flex align-items-center" href="/">
      <img src="{{ url_for('static', filename='photo/fitnes_logo.png') }}"
     alt="Logo"
     width="140"
     class="me-2">
      </a>

      <button class="navbar-toggler bg-black" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
 
    
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mx-auto fw-semibold">

        <li class="nav-item mx-3">
          <a class="nav-link active"  href="#workout-plans"> WORKOUTS</a>
        </li>   

        <li class="nav-item mx-3">
          <a class="nav-link active"  href="#meal-plans"> MEAL PLANS</a>
        </li>
        
        <li class="nav-item mx-3">
                    <a class="nav-link active" href="/calc">
                         CALORIES CALCULATOR
                    </a>
                </li>

        <li class="nav-item mx-3">
          <a class="nav-link active"  href="/contact"> CONTACT</a>
        </li>

        <li class="nav-item mx-3">
                    <a class="nav-link active" href="/packages">
                         PACKAGES
                    </a>
                </li>
        
        <li class="nav-item mx-3">
                    <a class="nav-link active" href="/favorites">
                        <i class="fas fa-heart"></i> FAVORITES
                    </a>
                </li>
      </ul>

      <ul class="navbar-nav ms-auto">
         <li class="nav-item">
                    <a class="btn btn-primary" href="/register">
                        REGISTER
                    </a>
                </li>
      </ul>
    </div>
</nav>

<!-- HOME SECTION -->
    <div class="d-flex align-items-center   ">
        <div class="container py-5">
            <div class="row align-items-center">
                <div class="col-lg-6 fw-semibold text-secondary-emphasis">
                    <h1 class="display-4 mb-3">BECOME THE BEST VERSION OF YOURSELF</h1>
                    <p class="lead mb-4 text-light">Empowering You To Push Past Your Limits.</p>

                    <!-- SEARCH AND FILTERS SECTION -->
                    <div class="search-filters-container mt-3">
                        <!-- SEARCH BAR -->
                        <div class="mb-3">
                            <div class="input-group input-group-sm">
                                <input type="text" class="form-control search-input" id="planSearch" placeholder="Search workouts, meals...">
                                <button class="btn btn-primary" type="button" id="searchBtn">
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>
                        </div>

                        <!-- FILTERS ROW - HORIZONTAL -->
                        <div class="filters-horizontal">
                            <select class="filter-select-compact" id="goalFilter">
                                <option value="">üéØ Goal</option>
                                <option value="weight-loss">Weight Loss</option>
                                <option value="muscle-gain">Muscle Gain</option>
                                <option value="gain-lose">Gain Muscle & Lose Fat</option>
                            </select>

                            <select class="filter-select-compact" id="difficultyFilter">
                                <option value="">‚ö° Difficulty</option>
                                <option value="beginner">Easy</option>
                                <option value="intermediate">Intermediate</option>
                                <option value="advanced">Difficult</option>
                            </select>

                            <select class="filter-select-compact" id="durationFilter">
                                <option value="">‚è±Ô∏è Duration</option>
                                <option value="4-weeks">30 Days</option>
                                <option value="8-weeks">60 Days</option>
                            </select>

                            <select class="filter-select-compact" id="dietTypeFilter">
                                <option value="">üçΩÔ∏è Diet</option>
                                <option value="stay-fit">Stay Fit</option>
                                <option value="lose-fat">Lose Fat</option>
                            </select>

                            <button class="btn-filter-reset" id="resetFiltersBtn">‚úï Reset</button>
                        </div>
                    </div>

                </div>
            <div class="col-lg-6 d-flex  ">
            <img src="{{ url_for('static', filename='photo/home_pic.png') }}" class="img-fluid rounded" >
            </div>
        </div>
        </div>
    </div>

    <!-- HOME SECTION FEATURES -->
  <section class="py-5 ">
    <div class="container">
        
        <div class="row g-4 justify-content-center"> 
            <div class="col-lg-4 col-md-6">
                <div class="item bg-white p-3 rounded shadow-sm text-center">
                    <a href="#workout-plans" class="text-decoration-none"> 
                        <img class="img-fluid mb-3 card-img-top" src="{{ url_for('static', filename='photo/workout pic.png') }}" >
                        <h4 class="text-dark"> Workouts</h4>
                    </a>
                </div>
            </div>

            <div class="col-lg-4 col-md-6 ">
                <div class="item bg-white p-3 rounded shadow-sm text-center">
                    <a href="#meal-plans" class="text-decoration-none">
                        <img class="img-fluid  card-img-top" src="{{ url_for('static', filename='photo/meal pic.png') }}" alt="Healthy Recipes">
                        <h4 class="text-dark">Meal Plans</h4>
                    </a>
                </div>
            </div>

            <div class="col-lg-4 col-md-6 ">
                <div class="item bg-white p-3 rounded shadow-sm text-center">
                    <a href="calc.html" class="text-decoration-none">
                        <img class="img-fluid  card-img-top" src="{{ url_for('static', filename='photo/calorie calc.png') }}" >
                        <h4 class="text-dark">Calorie Calculator</h4>
                    </a>
                </div>
            </div>

            

        </div>
    </div>
</section>

<!-- WORKOUT SECTION -->
<section id="workout-plans">

<!-- WORKOUT SECTION -->
<div class="d-flex align-items-center  pt-5 pb-5 ">
        <div class="container ">
            <div class="row align-items-center justify-content-center">
                <div class="col-lg-6 fw-semibold text-secondary-emphasis text-center">
                    <h1 class="display-4 mb-3 fw-semibold">Ready to Transform & Build Your Body?</h1>
                    <h1 class="fw-light">Choose Your Workout Plan  </h1>
                    <h1 class="fw-light">Now or Never </h1>
                </div>
            </div>
        </div>
    </div>
<!-- FILTER BUTTON -->
<div class="container my-4 ">
    <h3 class="mb-3" >PLANS:</h3>

    <div class="dropdown ">
        <button class="btn btn-outline-secondary dropdown-toggle" id="workoutfilterbtn" data-bs-toggle="dropdown"> Filter</button>
        <ul class="dropdown-menu">
            <li><a class="dropdown-item filter-item-workout " href="#" data-filter-type="all">All Plans</a></li>
            <li><hr class="dropdown-divider"></li>

            <li><a class="dropdown-item filter-item-workout" href="#" data-filter-type="goal" data-filter-value="gain-muscle" >GAIN MUSCLE</a></li>
             <li><a class="dropdown-item filter-item-workout" href="#" data-filter-type="goal" data-filter-value="fat-loss" >FAT LOSS</a></li>
             <li><hr class="dropdown-divider"></li>

             <li><a class="dropdown-item filter-item-workout" href="#" data-filter-type="duration" data-filter-value="30" >30 DAYS PLAN</a></li>
             <li><a class="dropdown-item filter-item-workout" href="#" data-filter-type="duration" data-filter-value="60" >60 DAYS PLAN</a></li>
        </ul>
    </div>
</div>

<!-- WORKOUT PLANS -->
<section class="py-5 ">
    <div class="container">
        
        <div class="row g-4 "> 
            <div class="col-lg-4 col-md-6 workout-card" data-goal="gain-muscle" data-duration="60">
                <div class="item bg-white p-3 rounded shadow-sm text-center position-relative">
                    <div class="heart-icon-home" onclick="toggleHeartHome(event)">
                        <i class="far fa-heart"></i>
                    </div>
                    <a href="/gainm" class="text-decoration-none"> 
                        <img class="img-fluid mb-3 card-img-top" src= "{{ url_for('static', filename='photo/gain muscle.jpeg') }}" alt="...">
                        <span class="badge bg-success mb-2">Easy</span>
                        <h4 class="text-dark"> Gain Muscle</h4>
                    </a>
                </div>
            </div>

             
            <div class="col-lg-4 col-md-6 workout-card" data-goal="fat-loss" data-duration="30">
                <div class="item bg-white p-3 rounded shadow-sm text-center position-relative">
                    <div class="heart-icon-home" onclick="toggleHeartHome(event)">
                        <i class="far fa-heart"></i>
                    </div>
                    <a href="/losefat" class="text-decoration-none"> 
                        <img class="img-fluid mb-3 card-img-top" src="{{ url_for('static', filename='photo/lose fats.jpeg') }}" alt="...">
                        <span class="badge bg-warning text-dark mb-2">Intermediate</span>
                        <h4 class="text-dark"> Lose Fats</h4>
                    </a>
                </div>
            </div>

         
            <div class="col-lg-4 col-md-6 workout-card" data-goal="gain-muscle" data-duration="60">
                <div class="item bg-white p-3 rounded shadow-sm text-center position-relative">
                    <div class="heart-icon-home" onclick="toggleHeartHome(event)">
                        <i class="far fa-heart"></i>
                    </div>
                    <a href="/gainlose" class="text-decoration-none"> 
                        <img class="img-fluid mb-3 card-img-top" src="{{ url_for('static', filename='photo/gl fats.jpeg') }}" alt="...">
                        <span class="badge bg-danger mb-2">Difficult</span>
                        <h4 class="text-dark"> Gain Muscle & Lose Fats</h4>
                    </a>
                </div>
            </div>

            

            

        </div>
    </div>
</section>
</section>

<!-- MEAL PLAN SECTION -->
<section id="meal-plans">

<!-- MEAL PLAN SECTION -->
<div class="d-flex align-items-center  pt-5 pb-5 ">
        <div class="container ">
            <div class="row align-items-center justify-content-center">
                <div class="col-lg-6 fw-semibold text-secondary-emphasis text-center">
                    <h1 class="display-4 mb-3 fw-semibold">Fuel Your Body the Right Way</h1>
                    <h1 class="fw-light">Choose Your Perfect Meal Plan</h1>
                </div>
            </div>
        </div>
    </div>
<!-- FILTER BUTTON -->
<div class="container my-4 ">
    <h3 class="mb-3" >PLANS:</h3>

    <div class="dropdown ">
        <button class="btn btn-outline-secondary dropdown-toggle" id="mealFilterBtn" data-bs-toggle="dropdown"> Filter</button>
        <ul class="dropdown-menu">
            <li><a class="dropdown-item filter-item-meal" href="#" data-filter-type="all" data-filter-value="all" >All Plans</a></li>
            <li><hr class="dropdown-divider"></li>

            <li><a class="dropdown-item filter-item-meal" href="#" data-filter-type="goal" data-filter-value="stay-fit" >STAY FIT</a></li>
            <li><a class="dropdown-item filter-item-meal" href="#"data-filter-type="goal"  data-filter-value="lose-fat" >LOSE FATS</a></li>
            <li><hr class="dropdown-divider"></li>

             <li><a class="dropdown-item filter-item-meal" href="#" data-filter-type="duration" data-filter-value="30" >30 DAYS PLAN</a></li>
             <li><a class="dropdown-item filter-item-meal" href="#" data-filter-type="duration" data-filter-value="60" >60 DAYS PLAN</a></li>
        </ul>
    </div>
</div>

<!-- MEALS PLANS -->
<section class="py-5  ">
    <div class="container ">
        
        <div class="row g-4 justify-content-center"> 
            <div class="col-lg-4 col-md-6 meal-card" data-goal="stay-fit" data-duration="30">
                <div class="item bg-white p-3 rounded shadow-sm text-center position-relative">
                    <div class="heart-icon-home" onclick="toggleHeartHome(event)">
                        <i class="far fa-heart"></i>
                    </div>
                    <a href="/mealfit" class="text-decoration-none"> 
                        <img class="img-fluid mb-3 card-img-top" src="{{ url_for('static', filename='photo/stay fit meal.jpeg') }}" alt="...">
                        <h4 class="text-dark"> STAY FIT</h4>
                    </a>
                </div>
            </div>

             
            <div class="col-lg-4 col-md-6 meal-card" data-goal="lose-fat" data-duration="60">
                <div class="item bg-white p-3 rounded shadow-sm text-center position-relative">
                    <div class="heart-icon-home" onclick="toggleHeartHome(event)">
                        <i class="far fa-heart"></i>
                    </div>
                    <a href="/meallose" class="text-decoration-none"> 
                        <img class="img-fluid mb-3 card-img-top" src="{{ url_for('static', filename='photo/lose fats meal.jpeg') }}" alt="...">
                        <h4 class="text-dark"> Lose Fats</h4>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
</section>

<!-- script to link filter --> 
 <script>
/**
 * Redirect users to appropriate workout page based on goal filter selection
 */
function setupWorkoutGoalRedirect() {
    const workoutFilterItems = document.querySelectorAll('.filter-item-workout');
    
    workoutFilterItems.forEach(item => {
        item.addEventListener('click', function(event) {
            event.preventDefault();

            const filterType = this.getAttribute('data-filter-type');
            const filterValue = this.getAttribute('data-filter-value');
            
            // If goal filter is selected, redirect to appropriate workout page
            if (filterType === 'goal') {
                if (filterValue === 'gain-muscle') {
                    window.location.href = 'gainM.html';
                } else if (filterValue === 'fat-loss') {
                    window.location.href = 'losefat.html';
                }
            }
            // For other filters (duration, all), just filter the cards
            else {
                const allCards = document.querySelectorAll('.workout-card');
                const filterButton = document.getElementById('workoutfilterbtn');
                
                let buttonText = this.textContent.trim();
                filterButton.textContent = 'Filter: ' + buttonText;
                
                allCards.forEach(card => {
                    if (filterValue === 'all') {
                        card.style.display = 'block';
                        return;
                    }
                    
                    const cardValue = card.getAttribute(`data-${filterType}`);
                    if (cardValue === filterValue) {
                        card.style.display = 'block'; 
                    } else {
                        card.style.display = 'none'; 
                    }
                });
            }
        });
    });
}

/**
 * Universal filtering function for meal plans
 */
function setupFilter(filterClass, cardClass, buttonId) {
    const filterItems = document.querySelectorAll(`.${filterClass}`);
    const allCards = document.querySelectorAll(`.${cardClass}`);
    const filterButton = document.getElementById(buttonId);

    filterItems.forEach(item => {
        item.addEventListener('click', function(event) {
            event.preventDefault();

            const filterType = this.getAttribute('data-filter-type');
            const filterValue = this.getAttribute('data-filter-value');
            
            let buttonText = this.textContent.trim();
            filterButton.textContent = 'Filter: ' + buttonText;
            
            allCards.forEach(card => {
                if (filterValue === 'all') {
                    card.style.display = 'block';
                    return;
                }
                
                const cardValue = card.getAttribute(`data-${filterType}`);

                if (cardValue === filterValue) {
                    card.style.display = 'block'; 
                } else {
                    card.style.display = 'none'; 
                }
            });
        });
    });
}

// Initialize the filters when the page loads
document.addEventListener('DOMContentLoaded', function() {
 // Setup workout goal redirect functionality
 setupWorkoutGoalRedirect();

 // Setup for MEAL PLANS
 setupFilter('filter-item-meal', 'meal-card', 'mealFilterBtn');
});
</script>



<!-- FOOTER -->
<footer class="bg-dark text-white py-5">
    <div class="container">
        <div class="row">
            
            <div class="col-md-4 mb-4">
                <a class="navbar-brand d-flex align-items-center mb-3" href="/">
                    <img src="{{ url_for('static', filename='photo/fitnes_logo.png') }}" alt="Logo" width="120" class="me-2 filter-white">
                </a>
                <p class="text-white-50">
                    Your personal tracker for strength, nutrition, and balance. Achieve your best self, body and mind.
                </p>
                <p class="text-white-50">¬© 2025 <a onclick="window.location.href='/admin'" >FitTrack</a> Inc.</p>
            </div>

            <div class="col-md-2 col-6 mb-4">
                <h5 class="text-white mb-3">Company</h5>
                <ul class="list-unstyled">
                    <li class="mb-2"><a href="about.html" class="text-white-50 text-decoration-none">About Us</a></li>
                    <li class="mb-2"><a href="careers.html" class="text-white-50 text-decoration-none">Careers</a></li>
                    <li class="mb-2"><a href="blog.html" class="text-white-50 text-decoration-none">Blog</a></li>
                </ul>
            </div>


            <div class="col-md-4 mb-4">
                <h5 class="text-white mb-3">Connect</h5>
                <div class="social-icons">
                    <a href="#" class="text-white-50 me-3 fs-4"><i class="fab fa-facebook"></i></a>
                    <a href="#" class="text-white-50 me-3 fs-4"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="text-white-50 me-3 fs-4"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="text-white-50 fs-4"><i class="fab fa-linkedin"></i></a>
                </div>
            </div>

        </div>
    </div>
</footer>


        
        <script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>

        <!-- SEARCH AND FILTERS FUNCTIONALITY -->
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Helper: check if user is registered
                function isRegistered() {
                    try {
                        return localStorage.getItem('registered') === 'true';
                    } catch (e) {
                        return false;
                    }
                }

                const planSearch = document.getElementById('planSearch');
                const searchBtn = document.getElementById('searchBtn');
                const resetFiltersBtn = document.getElementById('resetFiltersBtn');
                const goalFilter = document.getElementById('goalFilter');
                const difficultyFilter = document.getElementById('difficultyFilter');
                const durationFilter = document.getElementById('durationFilter');
                const equipmentFilter = document.getElementById('equipmentFilter');
                const dietTypeFilter = document.getElementById('dietTypeFilter');

                // Search functionality
                function performSearch() {
                    if (!planSearch) return;
                    const searchTerm = planSearch.value.toLowerCase().trim();
                    if (searchTerm) {
                        console.log('Searching for: ' + searchTerm);
                        // You can add search logic here to filter cards
                        alert('Searching for: ' + searchTerm);
                    }
                }

                if (searchBtn) {
                    searchBtn.addEventListener('click', performSearch);
                }
                if (planSearch) {
                    planSearch.addEventListener('keypress', function(e) {
                        if (e.key === 'Enter') {
                            performSearch();
                        }
                    });
                }

                // Goal filter - redirect to appropriate workout page
                if (goalFilter) {
                    goalFilter.addEventListener('change', function() {
                        const goal = goalFilter.value;
                        if (!isRegistered()) {
                            window.location.href = '/register';
                            return;
                        }
                        
                        if (goal === 'weight-loss') {
                            window.location.href = '/losefat';
                        } else if (goal === 'muscle-gain') {
                            window.location.href = '/gainm';
                        } else if (goal === 'gain-lose') {
                            window.location.href = '/gainlose';
                        }
                    });
                }

                // Difficulty filter - redirect to appropriate workout page
                if (difficultyFilter) {
                    difficultyFilter.addEventListener('change', function() {
                        const difficulty = difficultyFilter.value;
                        if (!isRegistered()) {
                            window.location.href = '/register';
                            return;
                        }
                        
                        if (difficulty === 'beginner') {
                            window.location.href = '/gainm';
                        } else if (difficulty === 'intermediate') {
                            window.location.href = '/losefat';
                        } else if (difficulty === 'advanced') {
                            window.location.href = '/gainlose';
                        }
                    });
                }

                // Duration filter - redirect to appropriate workout page
                if (durationFilter) {
                    durationFilter.addEventListener('change', function() {
                        const duration = durationFilter.value;
                        if (!isRegistered()) {
                            window.location.href = '/register';
                            return;
                        }
                        
                        if (duration === '4-weeks') {
                            // 30 Days plan
                            window.location.href = '/losefat';
                        } else if (duration === '8-weeks') {
                            // 60 Days plan
                            window.location.href = '/gainm';
                        }
                    });
                }

                // Meal horizontal filter - redirect to meal pages
                if (dietTypeFilter) {
                    dietTypeFilter.addEventListener('change', function() {
                        const dietGoal = dietTypeFilter.value;
                        if (!isRegistered()) {
                            window.location.href = '/register';
                            return;
                        }
                        console.log('Diet filter changed:', dietGoal);
                        if (dietGoal === 'stay-fit') {
                            window.location.href = '/mealfit';
                        } else if (dietGoal === 'lose-fat') {
                            window.location.href = '/meallose';
                        }
                    });
                }

                // Workout dropdown (legacy) items redirect by goal
                const workoutFilterItems = document.querySelectorAll('.filter-item-workout');
                workoutFilterItems.forEach(item => {
                    item.addEventListener('click', function(event) {
                        event.preventDefault();
                        if (!isRegistered()) {
                            window.location.href = '/register';
                            return;
                        }
                        const filterType = this.getAttribute('data-filter-type');
                        const filterValue = this.getAttribute('data-filter-value');
                        console.log('Workout filter clicked:', filterType, filterValue);

                        if (filterType === 'goal') {
                            if (filterValue === 'gain-muscle') {
                                window.location.href = '/gainm';
                            } else if (filterValue === 'fat-loss') {
                                window.location.href = '/losefat';
                            } else if (filterValue === 'gain-lose') {
                                window.location.href = '/gainlose';
                            }
                        }
                    });
                });

                // Other filters functionality (for future use)
                function applyOtherFilters() {
                    const equipment = equipmentFilter.value;
                    const dietType = dietTypeFilter.value;

                    const filters = {
                        equipment: equipment,
                        dietType: dietType
                    };

                    console.log('Applied Filters:', filters);
                    // You can add filtering logic here to show/hide cards based on selected filters
                }

                // Meal goal redirect based on dedicated meal filters section
                // This targets the meal section dropdown items with class 'filter-item-meal'
                const mealFilterItems = document.querySelectorAll('.filter-item-meal');
                mealFilterItems.forEach(item => {
                    item.addEventListener('click', function(event) {
                        event.preventDefault();
                        if (!isRegistered()) {
                            window.location.href = '/register';
                            return;
                        }
                        const filterType = this.getAttribute('data-filter-type');
                        const filterValue = this.getAttribute('data-filter-value');

                        // Only redirect on goal selections
                        if (filterType === 'goal') {
                            if (filterValue === 'stay-fit') {
                                window.location.href = '/mealfit';
                            } else if (filterValue === 'lose-fat') {
                                window.location.href = '/meallose';
                            }
                        }
                    });
                });

                // Add event listeners to other filter selects
                [durationFilter, equipmentFilter, dietTypeFilter].forEach(filter => {
                    if (filter) {
                        filter.addEventListener('change', applyOtherFilters);
                    }
                });

                // Reset filters
                if (resetFiltersBtn) {
                    resetFiltersBtn.addEventListener('click', function() {
                        planSearch.value = '';
                        goalFilter.value = '';
                        difficultyFilter.value = '';
                        durationFilter.value = '';
                        equipmentFilter.value = '';
                        dietTypeFilter.value = '';
                        console.log('Filters reset');
                        // Show all cards again
                    });
                }

                // Intercept direct card link clicks on Home to gate behind registration (workout & meal pages)
                const cardLinks = document.querySelectorAll('a[href$="gainM.html"], a[href$="losefat.html"], a[href$="gainlose.html"], a[href$="mealfit.html"], a[href$="meallose.html"]');
                if (cardLinks && cardLinks.length > 0) {
                    cardLinks.forEach(a => {
                        if (a) {
                            a.addEventListener('click', function(e) {
                                if (!isRegistered()) {
                                    e.preventDefault();
                                    window.location.href = '/register';
                                }
                            });
                        }
                    });
                }

                // Intercept navbar/menu links that should also require registration
                const otherLinks = document.querySelectorAll('a[href$="calc.html"], a[href$="contact.html"], a[href$="packages.html"], a[href="#workout-plans"], a[href="#meal-plans"]');
                if (otherLinks && otherLinks.length > 0) {
                    otherLinks.forEach(a => {
                        if (a) {
                            a.addEventListener('click', function(e) {
                                // Allow in-page anchors without registration for just viewing sections? If strict gate, block as well.
                                if (!isRegistered()) {
                                    e.preventDefault();
                                    window.location.href = '/register';
                                }
                            });
                        }
                    });
                }
            });

            // Toggle heart icon for favorites
            function toggleHeartHome(event) {
                event.stopPropagation();
                event.preventDefault();
                
                const heartIcon = event.currentTarget;
                const heart = heartIcon.querySelector('i');
                const card = heartIcon.closest('.item');
                const link = card.querySelector('a');
                const url = link.getAttribute('href');
                
                // Get current favorites
                let favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
                
                if (favorites.includes(url)) {
                    // Remove from favorites
                    favorites = favorites.filter(fav => fav !== url);
                    heart.classList.remove('fas');
                    heart.classList.add('far');
                } else {
                    // Add to favorites
                    favorites.push(url);
                    heart.classList.remove('far');
                    heart.classList.add('fas');
                }
                
                localStorage.setItem('favorites', JSON.stringify(favorites));
            }

            // Load favorites state on page load
            document.addEventListener('DOMContentLoaded', function() {
                const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
                document.querySelectorAll('.heart-icon-home').forEach(heartIcon => {
                    const card = heartIcon.closest('.item');
                    const link = card.querySelector('a');
                    const url = link.getAttribute('href');
                    const heart = heartIcon.querySelector('i');
                    
                    if (favorites.includes(url)) {
                        heart.classList.remove('far');
                        heart.classList.add('fas');
                    }
                });

                // Check if user is logged in
                if (localStorage.getItem('registered') === 'true') {
                    const registerBtn = document.querySelector('.navbar .btn-primary[href="register.html"]');
                    if (registerBtn && registerBtn.closest('li')) {
                        const li = registerBtn.closest('li');
                        li.innerHTML = '<a class="btn btn-primary" href="userdashboard.html"><i class="fas fa-user"></i> DASHBOARD</a>';
                    }
                }
            });
        </script>
    </body>
</html>